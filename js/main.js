// ---------------------------------------------
// ğŸŒ TRANSLATIONS
// ---------------------------------------------
const translations = {
    vi: {
        headerTitle: "JACKNOVA â€“ BÃšN Háº T MÃT",
        headerSubtitle: "TÃ¡i Sinh GiÃ¡ Trá»‹ â€“ NÃ¢ng Táº§m Sá»©c Khá»e. Thá»±c pháº©m Xanh tá»« Phá»¥ Pháº©m NÃ´ng Nghiá»‡p.",
        heroTitle: "BÃºn Háº¡t MÃ­t â€“ Sá»£i bÃºn xanh tá»« phá»¥ pháº©m nÃ´ng nghiá»‡p Viá»‡t Nam",
        heroSubtitle: "Dai ngon tá»± nhiÃªn â€“ KhÃ´ng Gluten â€“ KhÃ´ng pháº©m mÃ u â€“ KhÃ´ng cháº¥t báº£o quáº£n.",
        navIntro: "Giá»›i thiá»‡u",
        navInfo: "ThÃ nh pháº§n &amp; Lá»£i Ã­ch",
        navGallery: "HÃ¬nh áº£nh",
        navReview: "ÄÃ¡nh giÃ¡",
        navContact: "LiÃªn há»‡",
        navOrderBtn: "Äáº·t hÃ ng ngay",
        toggleDark: "Cháº¿ Ä‘á»™ tá»‘i",
        toggleLight: "Cháº¿ Ä‘á»™ sÃ¡ng",

        sectionIntroTitle: "Giá»›i thiá»‡u sáº£n pháº©m",
        productNameTitle: "TÃªn sáº£n pháº©m",
        productNameText: "<strong>JACKNOVA â€“ BÃºn Háº¡t MÃ­t</strong>",
        shortDescTitle: "MÃ´ táº£ ngáº¯n",
        shortDescText: "JACKNOVA - BÃºn Háº¡t MÃ­t lÃ  dÃ²ng bÃºn khÃ´ tiÃªn phong Ä‘Æ°á»£c cháº¿ biáº¿n tá»« <strong>bá»™t háº¡t mÃ­t</strong>. KhÃ´ng Gluten â€“ KhÃ´ng pháº©m mÃ u â€“ KhÃ´ng cháº¥t báº£o quáº£n.",
        detailDescTitle: "MÃ´ táº£ chi tiáº¿t",
        detailDescText:
            "JACKNOVA Ä‘i Ä‘áº§u xu hÆ°á»›ng <strong>Food Upcycling</strong>, tÃ¡i sinh háº¡t mÃ­t thÃ nh thá»±c pháº©m xanh. CÃ´ng nghá»‡ Ã©p Ä‘Ã¹n &amp; sáº¥y nhiá»‡t giÃºp bÃºn giá»¯ dinh dÆ°á»¡ng, dai ngon tá»± nhiÃªn mÃ  khÃ´ng cáº§n Gluten.",

        sectionInfoTitle: "ThÃ nh pháº§n â€“ Lá»£i Ã­ch â€“ HÆ°á»›ng dáº«n sá»­ dá»¥ng",
        ingredientTitle: "ThÃ nh pháº§n",
        ingredientText: "â€¢ Bá»™t háº¡t mÃ­t nguyÃªn cháº¥t.<br>â€¢ NguyÃªn liá»‡u phá»‘i trá»™n chá»n lá»c.",
        healthBenefitsText:
            "â€¢ KhÃ´ng Gluten.<br>â€¢ Low GI â€“ phÃ¹ há»£p ngÆ°á»i tiá»ƒu Ä‘Æ°á»ng.<br>â€¢ GiÃ u cháº¥t xÆ¡ hÃ²a tan.<br>â€¢ Bá»• sung protein &amp; khoÃ¡ng.",
        sustainabilityTitle: "Lá»£i Ã­ch bá»n vá»¯ng",
        sustainabilityText:
            "â€¢ Food Upcycling â€“ tÃ¡i sinh phá»¥ pháº©m.<br>â€¢ TÄƒng thu nháº­p cho nÃ´ng há»™.<br>â€¢ Thá»±c pháº©m xanh â€“ an toÃ n.",
        usageTitle: "HÆ°á»›ng dáº«n sá»­ dá»¥ng",
        usageText:
            "<strong>Luá»™c bÃºn 5 phÃºt</strong> â†’ xáº£ nÆ°á»›c láº¡nh (tÃ¹y chá»n).<br><br>â€¢ DÃ¹ng cho mÃ³n nÆ°á»›c.<br>â€¢ Trá»™n/xÃ o tÃ¹y thÃ­ch.<br>â€¢ NhÃºng láº©u.",
        packingTitle: "Quy cÃ¡ch Ä‘Ã³ng gÃ³i",
        packingText: "â€¢ GÃ³i 200g â€“ 2 Ä‘áº¿n 3 ngÆ°á»i Äƒn.<br>â€¢ Bao bÃ¬ PA/PE cao cáº¥p.",
        priceTitle: "GiÃ¡ bÃ¡n",
        priceText: "<strong>30.000 â€“ 35.000Ä‘ / gÃ³i 200g</strong>",

        targetTitle: "KhÃ¡ch hÃ ng má»¥c tiÃªu",
        target1: "NgÆ°á»i Äƒn kiÃªng (Low Carb / Eat Clean / Keto)",
        target2: "NgÆ°á»i dá»‹ á»©ng Gluten",
        target3: "NgÆ°á»i tiá»ƒu Ä‘Æ°á»ng &amp; ngÆ°á»i cao tuá»•i",
        target4: "NgÆ°á»i Äƒn chay / thuáº§n chay",
        target5: "Giá»›i tráº» 18â€“35 yÃªu sá»©c khá»e",

        galleryTitle: "HÃ¬nh áº£nh sáº£n pháº©m",
        gallery1: "BÃºn Ä‘Ã³ng gÃ³i",
        gallery2: "BÃºn xÃ o",
        gallery3: "BÃºn nÆ°á»›c",
        gallery4: "BÃºn háº¡t mÃ­t Ä‘Ã³ng há»™p",

        contactTitle: "ThÃ´ng tin liÃªn há»‡ &amp; Äáº·t hÃ ng",
        phoneLabel: "SÄT:",
        zaloLabel: "Zalo:",
        emailLabel: "Email:",
        fanpageLabel: "Fanpage:",
        addressLabel: "Äá»‹a chá»‰:",

        orderBoxTitle: "Äáº·t hÃ ng nhanh JACKNOVA",
        placeholderName: "Há» vÃ  tÃªn cá»§a báº¡n",
        placeholderPhone: "Sá»‘ Ä‘iá»‡n thoáº¡i",
        placeholderQty: "Sá»‘ lÆ°á»£ng gÃ³i (VD: 5)",
        placeholderNote: "Ghi chÃº thÃªm (Ä‘á»‹a chá»‰, thá»i gian liÃªn há»‡...)",
        submitBtn: "Gá»­i yÃªu cáº§u Ä‘áº·t hÃ ng",

        footerText:
            "Â© 2025 JACKNOVA â€“ BÃºn Háº¡t MÃ­t. TÃ¡i Sinh GiÃ¡ Trá»‹ â€“ NÃ¢ng Táº§m Sá»©c Khá»e. -------- Thá»‹nh Website --------",

        orderSuccess:
            "Cáº£m Æ¡n {name} Ä‘Ã£ Ä‘áº·t {qty} JACKNOVA!\nChÃºng tÃ´i sáº½ liÃªn há»‡ xÃ¡c nháº­n Ä‘Æ¡n hÃ ng trong thá»i gian sá»›m nháº¥t.",
        orderProductWord: "sáº£n pháº©m",
        orderYouWord: "báº¡n",
    },

    // ------------ ENGLISH VERSION ----------------
    en: {
        headerTitle: "JACKNOVA â€“ Jackfruit Seed Noodles",
        headerSubtitle: "Reviving Value â€“ Elevating Health. Green Food from Agricultural By-Products.",
        heroTitle: "Jackfruit Seed Noodles â€“ Green noodles from Vietnamese farm by-products",
        heroSubtitle: "Naturally chewy â€“ Gluten-free â€“ No artificial colors â€“ No preservatives.",
        navIntro: "About",
        navInfo: "Ingredients & Benefits",
        navGallery: "Gallery",
        navReview: "Reviews",
        navContact: "Contact",
        navOrderBtn: "Order now",
        toggleDark: "Dark mode",
        toggleLight: "Light mode",

        sectionIntroTitle: "Product introduction",
        productNameTitle: "Product name",
        productNameText: "<strong>JACKNOVA â€“ Jackfruit Seed Noodles</strong>",

        shortDescText:
            "JACKNOVA â€“ Jackfruit Seed Noodles is a pioneering dried noodle made from <strong>jackfruit seed flour</strong>. Gluten-free â€“ No artificial colors â€“ No preservatives.",
        detailDescText:
            "JACKNOVA leads the <strong>Food Upcycling</strong> trend, transforming jackfruit seeds into sustainable food. Extrusion & hot-air drying technology keeps nutrients and creates a naturally chewy texture without Gluten.",

        sectionInfoTitle: "Ingredients â€“ Benefits â€“ Usage",
        ingredientText: "â€¢ Pure jackfruit seed flour.<br>â€¢ Selected blended ingredients.",
        healthBenefitsText:
            "â€¢ Gluten-free.<br>â€¢ Low GI â€“ suitable for people with diabetes.<br>â€¢ Rich in soluble fiber.<br>â€¢ Provides protein & minerals.",
        sustainabilityText:
            "â€¢ Food Upcycling â€“ reusing by-products.<br>â€¢ Increases income for jackfruit farmers.<br>â€¢ Green and safe food.",
        usageText:
            "<strong>Boil noodles for 5 minutes</strong> â†’ optionally rinse with cold water.<br><br>â€¢ Use for soup dishes.<br>â€¢ Stir-fry or toss with sauce.<br>â€¢ Dip in hotpot.",
        packingText: "â€¢ 200g pack â€“ serves 2â€“3 people.<br>â€¢ High-quality PA/PE packaging.",

        priceText: "<strong>30,000 â€“ 35,000 VND / 200g pack</strong>",

        targetTitle: "Target customers",
        target1: "People on diet (Low Carb / Eat Clean / Keto)",
        target2: "People with Gluten intolerance",
        target3: "People with diabetes & the elderly",
        target4: "Vegetarian / vegan consumers",
        target5: "Young people 18â€“35 who care about health",

        galleryTitle: "Product gallery",

        contactTitle: "Contact & Order",
        phoneLabel: "Phone:",
        zaloLabel: "Zalo:",
        emailLabel: "Email:",
        fanpageLabel: "Fanpage:",
        addressLabel: "Address:",

        orderBoxTitle: "Quick order JACKNOVA",
        placeholderName: "Your full name",
        placeholderPhone: "Phone number",
        placeholderQty: "Number of packs (e.g. 5)",
        placeholderNote: "Additional notes (address, preferred contact time...)",
        submitBtn: "Send order request",

        footerText:
            "Â© 2025 JACKNOVA â€“ Jackfruit Seed Noodles. Reviving Value â€“ Elevating Health. -------- Thinh Website --------",

        orderSuccess:
            "Thank you {name} for ordering {qty} JACKNOVA!\nWe will contact you soon to confirm your order.",
        orderProductWord: "product(s)",
        orderYouWord: "you",
    },
};

// ========================================================================
// ğŸŒ LANGUAGE SYSTEM
// ========================================================================
let currentLang = localStorage.getItem("jacknovaLang") || "vi";

function applyLanguage(lang) {
    const dict = translations[lang] || translations.vi;
    document.documentElement.lang = lang;

    // update text nodes
    document.querySelectorAll("[data-i18n]").forEach((el) => {
        const key = el.getAttribute("data-i18n");
        if (dict[key]) el.innerHTML = dict[key];
    });

    // update placeholders
    document.querySelectorAll("[data-i18n-placeholder]").forEach((el) => {
        const key = el.getAttribute("data-i18n-placeholder");
        if (dict[key]) el.placeholder = dict[key];
    });

    // switch button UI
    document.querySelectorAll(".lang-btn").forEach((btn) => {
        btn.classList.toggle("active", btn.dataset.lang === lang);
    });

    updateThemeButtonText();
    localStorage.setItem("jacknovaLang", lang);
}

// ========================================================================
// ğŸŒ™ THEME SYSTEM
// ========================================================================
const toggleThemeBtn = document.getElementById("toggleThemeBtn");

function updateThemeButtonText() {
    const dict = translations[currentLang];
    toggleThemeBtn.textContent = document.body.classList.contains("dark-mode")
        ? dict.toggleLight
        : dict.toggleDark;
}

// init dark mode
if (localStorage.getItem("jacknovaTheme") === "dark") {
    document.body.classList.add("dark-mode");
}

toggleThemeBtn.addEventListener("click", () => {
    document.body.classList.toggle("dark-mode");
    localStorage.setItem(
        "jacknovaTheme",
        document.body.classList.contains("dark-mode") ? "dark" : "light"
    );
    updateThemeButtonText();
});

// language switch
document.querySelectorAll(".lang-btn").forEach((btn) => {
    btn.addEventListener("click", () => {
        currentLang = btn.dataset.lang;
        applyLanguage(currentLang);
    });
});

// INIT LANGUAGE
applyLanguage(currentLang);

// ========================================================================
// â¬† BACK TO TOP
// ========================================================================
const backToTopBtn = document.getElementById("backToTop");

window.addEventListener("scroll", () => {
    backToTopBtn.style.display = window.pageYOffset > 400 ? "block" : "none";
});

backToTopBtn.addEventListener("click", () => {
    window.scrollTo({ top: 0, behavior: "smooth" });
});

// ========================================================================
// ğŸ›’ ORDER FORM
// ========================================================================
const orderForm = document.getElementById("quickOrderForm");

orderForm.addEventListener("submit", function (e) {
    e.preventDefault();

    const name = this.fullname.value.trim();
    const qty = this.quantity.value.trim();
    const dict = translations[currentLang];

    const displayName = name || dict.orderYouWord;

    const msg = dict.orderSuccess
        .replace("{name}", displayName)
        .replace("{qty}", qty);

    alert(msg);
    this.reset();
});

// ========================================================================
// ğŸ–¼ LIGHTBOX GALLERY PRO
// ========================================================================
const galleryImages = document.querySelectorAll(".gallery-item img");
const lightbox = document.getElementById("lightbox");
const lightboxImg = document.getElementById("lightboxImage");
const btnPrev = document.getElementById("lightboxPrev");
const btnNext = document.getElementById("lightboxNext");
const btnClose = document.getElementById("lightboxClose");

let currentIndex = 0;

function openLightbox(index) {
    currentIndex = index;
    lightbox.style.display = "flex";
    lightboxImg.src = galleryImages[index].src;
}

function closeLightbox() {
    lightbox.style.display = "none";
}

function nextImage() {
    currentIndex = (currentIndex + 1) % galleryImages.length;
    lightboxImg.src = galleryImages[currentIndex].src;
}

function prevImage() {
    currentIndex =
        (currentIndex - 1 + galleryImages.length) % galleryImages.length;
    lightboxImg.src = galleryImages[currentIndex].src;
}

galleryImages.forEach((img, index) => {
    img.addEventListener("click", () => openLightbox(index));
});

btnClose.addEventListener("click", closeLightbox);

lightbox.addEventListener("click", (e) => {
    if (e.target === lightbox) closeLightbox();
});

btnPrev.addEventListener("click", prevImage);
btnNext.addEventListener("click", nextImage);

document.addEventListener("keydown", (e) => {
    if (lightbox.style.display !== "flex") return;

    if (e.key === "Escape") closeLightbox();
    if (e.key === "ArrowRight") nextImage();
    if (e.key === "ArrowLeft") prevImage();
});

// SWIPE (Mobile)
let startX = 0;

lightbox.addEventListener("touchstart", (e) => {
    startX = e.touches[0].clientX;
});

lightbox.addEventListener("touchend", (e) => {
    const endX = e.changedTouches[0].clientX;

    if (endX - startX > 50) prevImage();
    else if (startX - endX > 50) nextImage();
});
